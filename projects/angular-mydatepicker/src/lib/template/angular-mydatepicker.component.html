<span #styleEl></span>
<div class="ng-mydp {{opts.stylesData.selector}}">
  <div class="myDpSelector" #selectorEl [libAngularMyDatePickerFocus]="1" [ngStyle]="{'width': opts.selectorWidth, 'height' : opts.selectorHeight, 'top': !opts.inline ? selectorPos.top : '0', 'left': !opts.inline ? selectorPos.left : '0'}" [ngClass]="{'myDpSelectorArrow': opts.showSelectorArrow, 'myDpSelectorArrowLeft': opts.showSelectorArrow && !opts.alignSelectorRight, 'myDpSelectorArrowRight': opts.showSelectorArrow&&opts.alignSelectorRight, 'myDpSelectorAbsolute': !opts.inline, 'myDpSelectorPosInitial': opts.inline}" (keyup)="onCloseSelector($event)" tabindex="0">
    <div class="monthYearSelBar" [ngClass]="{'monthYearSelBarBorder': selectMonth || selectYear}">
      <div class="myDpPrevBtn">
        <button type="button" [attr.aria-label]="opts.ariaLabelPrevMonth" class="myDpHeaderBtn myDpIcon myDpIconLeftArrow myDpHeaderBtnEnabled" (click)="onPrevNavigateBtnClicked($event)" [disabled]="prevViewDisabled" [ngClass]="{'myDpHeaderBtnDisabled': prevViewDisabled}"></button>
      </div>
      <div class="myDpMonthYearText">
        <button type="button" class="myDpHeaderBtn myDpMonthBtn" *ngIf="!selectYear" (click)="opts.monthSelector && onMonthViewClicked($event)" tabindex="{{opts.monthSelector ? '0':'-1'}}" [ngClass]="{'myDpMonthLabel': opts.monthSelector, 'myDpHeaderLabelBtnNotEdit': !opts.monthSelector}">{{visibleMonth.monthTxt}}</button>
        <button type="button" class="myDpHeaderBtn myDpYearBtn" (click)="opts.yearSelector && onYearViewClicked($event)" tabindex="{{opts.yearSelector ? '0':'-1'}}" [ngClass]="{'myDpYearLabel': opts.yearSelector, 'myDpHeaderLabelBtnNotEdit': !opts.yearSelector}">{{!selectYear ? visibleMonth.year : years[0][0].year + " - " + years[4][4].year}}</button>
      </div>
      <div class="myDpNextBtn">
        <button type="button" [attr.aria-label]="opts.ariaLabelNextMonth" class="myDpHeaderBtn myDpIcon myDpIconRightArrow myDpHeaderBtnEnabled" (click)="onNextNavigateBtnClicked($event)" [disabled]="nextViewDisabled" [ngClass]="{'myDpHeaderBtnDisabled': nextViewDisabled}"></button>
      </div>
    </div>
    <table class="myDpCalTable" *ngIf="!selectMonth && !selectYear">
      <thead><tr><th class="myDpWeekDayTitle myDpWeekDayTitleWeekNbr" *ngIf="opts.showWeekNumbers && opts.firstDayOfWeek==='mo'">#</th><th class="myDpWeekDayTitle" scope="col" *ngFor="let d of weekDays">{{d}}</th></tr></thead>
      <tbody>
        <tr *ngFor="let w of dates; let di = index">
          <td class="myDpDaycellWeekNbr" *ngIf="opts.showWeekNumbers && opts.firstDayOfWeek==='mo'">{{w.weekNbr}}</td>
          <td id="d_{{di}}_{{i}}" class="d_{{di}}_{{i}} myDpDaycell" *ngFor="let d of w.week; let i = index"
              [ngClass]="{'myDpRangeColor': isDateInRange(d.dateObj, selectedDateRange) || d.range,
              'myDpPrevMonth': d.cmo === prevMonthId,
              'myDpCurrMonth':d.cmo === currMonthId && !d.disabled,
              'myDpNextMonth': d.cmo === nextMonthId,
              'myDpSelectedDay':!this.opts.dateRange && isDateSame(selectedDate, d.dateObj) || this.opts.dateRange && isDateRangeBeginOrEndSame(selectedDateRange, d.dateObj),
              'myDpDisabled': d.disabled,
              'myDpTableSingleDay': !d.disabled}"
              (click)="onDateCellClicked($event, d)" (keydown)="onDateCellKeyDown($event, d)"
              (mouseenter)="onDateCellMouseEnter(d)" (mouseleave)="onDateCellMouseLeave()" tabindex="0">
            <span *ngIf="d.markedDate.marked" class="myDpMarkDate" [ngStyle]="{'background-color': d.markedDate.color}"></span>
            <span  class="myDpDayValue" [ngClass]="{'myDpMarkCurrDay': d.currDay && opts.markCurrentDay, 'myDpDimDay': d.highlight && (d.cmo===prevMonthId || d.cmo===nextMonthId || d.disabled), 'myDpHighlight': d.highlight}">{{d.dateObj.day}}</span>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="myDpMonthTable" *ngIf="selectMonth">
      <tbody>
        <tr *ngFor="let mr of months; let mi = index">
          <td id="m_{{mi}}_{{i}}" class="m_{{mi}}_{{i}} myDpMonthcell"
              [ngClass]="{'myDpSelectedMonth': m.selected, 'myDpDisabled': m.disabled, 'myDpTableSingleMonth': !m.disabled}"
              *ngFor="let m of mr; let i = index" (click)="onMonthCellClicked($event, m)" (keydown)="onMonthCellKeyDown($event, m)" tabindex="0">
            <span class="myDpMonthValue" [ngClass]="{'myDpMarkCurrMonth': m.currMonth && opts.markCurrentMonth}">{{m.name}}</span>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="myDpYearTable" *ngIf="selectYear">
      <tbody>
        <tr *ngFor="let yr of years; let yi = index">
          <td id="y_{{yi}}_{{i}}" class="y_{{yi}}_{{i}} myDpYearcell"
              [ngClass]="{'myDpSelectedYear': y.selected, 'myDpDisabled': y.disabled, 'myDpTableSingleYear': !y.disabled}"
              *ngFor="let y of yr; let i = index" (click)="onYearCellClicked($event, y)" (keydown)="onYearCellKeyDown($event, y)" tabindex="0">
            <span class="myDpYearValue" [ngClass]="{'myDpMarkCurrYear': y.currYear && opts.markCurrentYear}">{{y.year}}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
